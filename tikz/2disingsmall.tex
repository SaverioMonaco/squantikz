\newcommand{\spindown}{
	\begin{tikzpicture}[baseline=(c.center)]
		% filled circle with thick black outline (center fixed at origin)
		\node[draw=black, thick, circle, minimum size=.5cm, inner sep=0pt, fill=\maincolor!50] (c) at (0,0) {};

		\draw[
		-{Triangle[width=8pt,length=8pt]},
		line width=4pt,
		color=\maincolor!40!gray
		] (0, +.25) -- ++(0,-.5); % relative placement

		\node[draw=black, thick, circle, minimum size=.5cm, inner sep=0pt] (c) at (0,0) {};

	\end{tikzpicture}
}
\newcommand{\spinup}{
	\begin{tikzpicture}[baseline=(c.center)]
		% filled circle with thick black outline (center fixed at origin)
		\node[draw=black, thick, circle, minimum size=.5cm, inner sep=0pt, fill=\secondarycolor!50] (c) at (0,0) {};

		\draw[
		-{Triangle[width=8pt,length=8pt]},
		line width=4pt,
		color=\secondarycolor!40!gray
		] (0, -.25) -- ++(0,+.5); % relative placement

		\node[draw=black, thick, circle, minimum size=.5cm, inner sep=0pt] (c) at (0,0) {};

	\end{tikzpicture}
}
\begin{tikzpicture}[
	connection/.style={
	->,
	line width=2pt,
	black!40!white,
	opacity=1,
	>={Triangle[length=4, width=4]}
	},
	magfield/.style={
	->,
	line width=2pt,
	black!40!white,
	opacity=1,
	>={Triangle[length=4, width=4]}
	}
	]
	\pgfdeclarelayer{background}
	\pgfdeclarelayer{main}
	\pgfdeclarelayer{foreground}
	\pgfsetlayers{background,main,foreground}

	\begin{pgfonlayer}{main}
		\node (spin11) at (0, 0) {\spinup};
		\node (spin21) at ([xshift=1cm]spin11.east) {\spindown};
		\node (spin31) at ([xshift=1cm]spin21.east) {\spindown};

		\node (spin12) at ([xshift=-1cm, yshift=-1cm]spin11) {\spindown};
		\node (spin22) at ([xshift=1cm]spin12.east) {\spinup};
		\node (spin32) at ([xshift=1cm]spin22.east) {\spinup};

		\node (spin13) at ([xshift=-1cm, yshift=-1cm]spin12) {\spinup};
		\node (spin23) at ([xshift=1cm]spin13.east) {\spinup};
		\node (spin33) at ([xshift=1cm]spin23.east) {\spinup};

		\draw[magfield] (2.75, -1.35) -- coordinate (mag) ++(0, 0.75);
		\node at ([xshift=.3cm]mag) {$\mathbf{h}$};

		\draw[connection]
		([yshift=+.2cm]spin32) to[out=100, in=70] (spin22);
		\draw[connection]
		([yshift=+.2cm]spin32) to[out=300, in=-10] (spin33);

		\node at ([xshift=-.65cm, yshift=.45cm]spin32) {$\mathbf{J}$};
		\node at ([xshift=.45cm, yshift=-.9cm]spin32) {$\mathbf{J}$};

	\end{pgfonlayer}

	\begin{pgfonlayer}{background}
		\draw[gray, line width=0.1pt] (spin11) -- (spin31);
		\draw[gray, line width=0.1pt] (spin12) -- (spin32);
		\draw[gray, line width=0.1pt] (spin13) -- (spin33);

		\draw[gray, line width=0.1pt] (spin11) -- (spin13);
		\draw[gray, line width=0.1pt] (spin21) -- (spin23);
		\draw[gray, line width=0.1pt] (spin31) -- (spin33);

	\end{pgfonlayer}
\end{tikzpicture}