\begin{quantikz}[row sep={0.6cm,between origins}, wire types={n,n,n,n}]
	 & [-.1cm] \ostate & \gate[4, style={fill=\maincolor!30}]{\,\, \mathcal{F}(\vec{x}) \,\,}\qw & \gate[4, style={fill=\secondarycolor!30}]{\,\, IQP(\vec{\theta}) \,\,}\qw & \qw & [-.5cm] \qmeter{} \\
	 & \ostate         & \qw                                                                     & \qw                                                                       & \qw & \qmeter{}         \\
	 & \vstate         &                                                                         &                                                                           &     & \mdots            \\
	 & \ostate         & \qw                                                                     & \qw                                                                       & \qw & \qmeter{}
\end{quantikz}